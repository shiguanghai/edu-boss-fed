(window.webpackJsonp = window.webpackJsonp || []).push([['course-section'], { '1dde': function (e, t, n) { var s = n('d039'); var o = n('b622'); var r = n('2d00'); var a = o('species'); e.exports = function (e) { return r >= 51 || !s(function () { var t = []; var n = t.constructor = {}; return n[a] = function () { return { foo: 1 } }, t[e](Boolean).foo !== 1 }) } }, '2e4c': function (e, t, n) { 'use strict'; n.d(t, 'a', function () { return o }), n.d(t, 'c', function () { return r }), n.d(t, 'b', function () { return a }); var s = n('b32d'); var o = function (e) { return Object(s.a)({ method: 'GET', url: '/boss/course/section/getSectionAndLesson', params: { courseId: e } }) }; var r = function (e) { return Object(s.a)({ method: 'POST', url: '/boss/course/section/saveOrUpdateSection', data: e }) }; var a = function (e) { return Object(s.a)({ method: 'GET', url: '/boss/course/section/getBySectionId', params: { sectionId: e } }) } }, 4614: function (e, t, n) { 'use strict'; n.r(t); var s = function () { var e = this; var t = e.$createElement; var n = e._self._c || t; return n('div', { staticClass: 'course-section' }, [n('el-card', { staticClass: 'box-card' }, [n('div', { staticClass: 'card-header', attrs: { slot: 'header' }, slot: 'header' }, [e._v(' ' + e._s(e.course.courseName) + ' '), n('el-button', { attrs: { type: 'primary' }, on: { click: e.handleShowAddSection } }, [e._v('添加阶段')])], 1), n('el-tree', { attrs: { data: e.sections, props: e.defaultProps, draggable: '', 'allow-drop': e.handleAllowDrop }, on: { 'node-drop': e.handleSort }, scopedSlots: e._u([{ key: 'default', fn: function (t) { var s = t.node; var o = t.data; return n('div', { staticClass: 'inner' }, [n('span', [e._v(e._s(s.label))]), o.sectionName ? n('span', { staticClass: 'actions' }, [n('el-button', { on: { click: function (t) { return t.stopPropagation(), e.handleShowEditSection(o) } } }, [e._v('编辑')]), n('el-button', { attrs: { type: 'primary' }, on: { click: function (t) { return t.stopPropagation(), e.handleShowAddLesson(o) } } }, [e._v('添加课时')]), n('el-select', { staticClass: 'select-status', attrs: { placeholder: '请选择' }, on: { change: function (t) { return e.handleSectionStatusChange(o) } }, model: { value: o.status, callback: function (t) { e.$set(o, 'status', t) }, expression: 'data.status' } }, [n('el-option', { attrs: { label: '已隐藏', value: 0 } }), n('el-option', { attrs: { label: '待更新', value: 1 } }), n('el-option', { attrs: { label: '已更新', value: 2 } })], 1)], 1) : n('span', { staticClass: 'actions' }, [n('el-button', { on: { click: function (t) { return e.handleShowEditLesson(o, s.parent.data) } } }, [e._v('编辑')]), n('el-button', { attrs: { type: 'success' }, on: { click: function (t) { return e.$router.push({ name: 'course-video', params: { courseId: e.courseId }, query: { lessonId: o.id } }) } } }, [e._v('上传视频')]), n('el-select', { staticClass: 'select-status', attrs: { placeholder: '请选择' }, on: { change: function (t) { return e.handleLessonStatusChange(o) } }, model: { value: o.status, callback: function (t) { e.$set(o, 'status', t) }, expression: 'data.status' } }, [n('el-option', { attrs: { label: '已隐藏', value: 0 } }), n('el-option', { attrs: { label: '待更新', value: 1 } }), n('el-option', { attrs: { label: '已更新', value: 2 } })], 1)], 1)]) } }]) })], 1), n('el-dialog', { attrs: { title: e.isEditSection ? '编辑课程阶段' : '添加课程阶段', visible: e.isAddSectionShow }, on: { 'update:visible': function (t) { e.isAddSectionShow = t } } }, [n('el-form', { ref: 'section-form', attrs: { model: e.section, 'label-width': '70px' } }, [n('el-form-item', { attrs: { label: '课程名称' } }, [n('el-input', { attrs: { value: e.course.courseName, autocomplete: 'off', disabled: '' } })], 1), n('el-form-item', { attrs: { label: '章节名称' } }, [n('el-input', { attrs: { autocomplete: 'off' }, model: { value: e.section.sectionName, callback: function (t) { e.$set(e.section, 'sectionName', t) }, expression: 'section.sectionName' } })], 1), n('el-form-item', { attrs: { label: '章节描述' } }, [n('el-input', { attrs: { type: 'textarea', autocomplete: 'off' }, model: { value: e.section.description, callback: function (t) { e.$set(e.section, 'description', t) }, expression: 'section.description' } })], 1), n('el-form-item', { attrs: { label: '章节排序' } }, [n('el-input-number', { model: { value: e.section.orderNum, callback: function (t) { e.$set(e.section, 'orderNum', t) }, expression: 'section.orderNum' } })], 1)], 1), n('div', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [n('el-button', { on: { click: function (t) { e.isAddSectionShow = !1 } } }, [e._v('取 消')]), n('el-button', { attrs: { type: 'primary' }, on: { click: e.handleAddSection } }, [e._v('确 定')])], 1)], 1), n('el-dialog', { attrs: { title: e.isEditLesson ? '编辑课时' : '添加课时', visible: e.isAddLessonShow }, on: { 'update:visible': function (t) { e.isAddLessonShow = t } } }, [n('el-form', { ref: 'lesson-form', attrs: { model: e.lesson, 'label-width': '100px' } }, [n('el-form-item', { attrs: { label: '课程名称' } }, [n('el-input', { attrs: { value: e.course.courseName, autocomplete: 'off', disabled: '' } })], 1), n('el-form-item', { attrs: { label: '章节名称' } }, [n('el-input', { attrs: { value: e.lesson.sectionName, disabled: '', autocomplete: 'off' } })], 1), n('el-form-item', { attrs: { label: '课时名称' } }, [n('el-input', { attrs: { autocomplete: 'off' }, model: { value: e.lesson.theme, callback: function (t) { e.$set(e.lesson, 'theme', t) }, expression: 'lesson.theme' } })], 1), n('el-form-item', { attrs: { label: '时长' } }, [n('el-input', { attrs: { type: 'number', autocomplete: 'off' }, model: { value: e.lesson.duration, callback: function (t) { e.$set(e.lesson, 'duration', e._n(t)) }, expression: 'lesson.duration' } }, [n('template', { slot: 'append' }, [e._v('分钟')])], 2)], 1), n('el-form-item', { attrs: { label: '是否开放试听' } }, [n('el-switch', { model: { value: e.lesson.isFree, callback: function (t) { e.$set(e.lesson, 'isFree', t) }, expression: 'lesson.isFree' } })], 1), n('el-form-item', { attrs: { label: '课时排序', prop: 'description' } }, [n('el-input-number', { model: { value: e.lesson.orderNum, callback: function (t) { e.$set(e.lesson, 'orderNum', t) }, expression: 'lesson.orderNum' } })], 1)], 1), n('div', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [n('el-button', { on: { click: function (t) { e.isAddLessonShow = !1 } } }, [e._v('取 消')]), n('el-button', { attrs: { type: 'primary' }, on: { click: e.handleAddLesson } }, [e._v('确 定')])], 1)], 1)], 1) }; var o = []; var r = n('1da1'); var a = (n('96cf'), n('a9e3'), n('d3b7'), n('3ca3'), n('ddb0'), n('d81d'), n('2b0e')); var i = n('2e4c'); var c = n('6fd8'); var u = n('49e4'); var l = a.default.extend({ name: 'CourseSection', props: { courseId: { type: [String, Number], required: !0 } }, data: function () { var e = { children: 'lessonDTOS', label: function (e) { return e.sectionName || e.theme } }; var t = { courseId: this.courseId, sectionName: '', description: '', orderNum: 0, status: 0 }; var n = { courseId: this.courseId, sectionId: void 0, sectionName: '', theme: '', duration: 0, isFree: !1, orderNum: 0, status: 0 }; return { course: {}, sections: [], defaultProps: e, section: t, isAddSectionShow: !1, isEditSection: !1, lesson: n, isAddLessonShow: !1, isEditLesson: !1 } }, created: function () { this.loadSections(), this.loadCourse() }, methods: { loadCourse: function () { var e = this; return Object(r.a)(regeneratorRuntime.mark(function t () { var n, s; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, Object(c.b)(e.courseId); case 2:n = t.sent, s = n.data, e.course = s.data; case 5:case 'end':return t.stop() } }, t) }))() }, loadSections: function () { var e = this; return Object(r.a)(regeneratorRuntime.mark(function t () { var n, s; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, Object(i.a)(e.courseId); case 2:n = t.sent, s = n.data, e.sections = s.data; case 5:case 'end':return t.stop() } }, t) }))() }, handleShowAddSection: function () { this.section = { courseId: this.courseId, sectionName: '', description: '', orderNum: 0, status: 0 }, this.isEditSection = !1, this.isAddSectionShow = !0 }, handleAddSection: function () { var e = this; return Object(r.a)(regeneratorRuntime.mark(function t () { return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, Object(i.c)(e.section); case 2:e.loadSections(), e.isAddSectionShow = !1, e.$refs['section-form'].resetFields(), e.$message.success('操作成功'); case 6:case 'end':return t.stop() } }, t) }))() }, handleShowEditSection: function (e) { var t = this; return Object(r.a)(regeneratorRuntime.mark(function n () { var s, o; return regeneratorRuntime.wrap(function (n) { while (1) switch (n.prev = n.next) { case 0:return n.next = 2, Object(i.b)(e.id); case 2:s = n.sent, o = s.data, t.section = o.data, t.isEditSection = !0, t.isAddSectionShow = !0; case 7:case 'end':return n.stop() } }, n) }))() }, handleSectionStatusChange: function (e) { var t = this; return Object(r.a)(regeneratorRuntime.mark(function n () { return regeneratorRuntime.wrap(function (n) { while (1) switch (n.prev = n.next) { case 0:return n.next = 2, Object(i.c)(e); case 2:t.$message.success('操作成功'); case 3:case 'end':return n.stop() } }, n) }))() }, handleLessonStatusChange: function (e) { var t = this; return Object(r.a)(regeneratorRuntime.mark(function n () { return regeneratorRuntime.wrap(function (n) { while (1) switch (n.prev = n.next) { case 0:return n.next = 2, Object(u.b)(e); case 2:t.$message.success('操作成功'); case 3:case 'end':return n.stop() } }, n) }))() }, handleShowAddLesson: function (e) { this.lesson = { sectionName: e.sectionName, sectionId: e.id, courseId: this.courseId, theme: '', duration: 0, isFree: !1, orderNum: 0, status: 0 }, this.isEditLesson = !1, this.isAddLessonShow = !0 }, handleAddLesson: function () { var e = this; return Object(r.a)(regeneratorRuntime.mark(function t () { return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, Object(u.b)(e.lesson); case 2:e.$message.success('操作成功'), e.loadSections(), e.isAddLessonShow = !1; case 5:case 'end':return t.stop() } }, t) }))() }, handleShowEditLesson: function (e, t) { this.lesson = e, this.lesson.sectionName = t.sectionName, this.isEditLesson = !0, this.isAddLessonShow = !0 }, handleAllowDrop: function (e, t, n) { return e.data.sectionId === t.data.sectionId && n !== 'inner' }, handleSort: function (e, t) { var n = this; return Object(r.a)(regeneratorRuntime.mark(function s () { return regeneratorRuntime.wrap(function (s) { while (1) switch (s.prev = s.next) { case 0:return s.prev = 0, s.next = 3, Promise.all(t.parent.childNodes.map(function (t, n) { return e.data.lessonDTOS ? Object(i.c)({ id: t.data.id, orderNum: n + 1 }) : Object(u.b)({ id: t.data.id, orderNum: n + 1 }) })); case 3:n.$message.success('排序成功'), s.next = 9; break; case 6:s.prev = 6, s.t0 = s.catch(0), n.$message.error('排序失败'); case 9:case 'end':return s.stop() } }, s, null, [[0, 6]]) }))() } } }); var d = l; var f = (n('7ddd'), n('2877')); var p = Object(f.a)(d, s, o, !1, null, '2678cddc', null); t.default = p.exports }, '49e4': function (e, t, n) { 'use strict'; n.d(t, 'b', function () { return o }), n.d(t, 'a', function () { return r }); var s = n('b32d'); var o = function (e) { return Object(s.a)({ method: 'POST', url: '/boss/course/lesson/saveOrUpdate', data: e }) }; var r = function (e) { return Object(s.a)({ method: 'GET', url: '/boss/course/lesson/getById', params: { lessonId: e } }) } }, 5899: function (e, t) { e.exports = '\t\n\v\f\r                　\u2028\u2029\ufeff' }, '58a8': function (e, t, n) { var s = n('1d80'); var o = n('5899'); var r = '[' + o + ']'; var a = RegExp('^' + r + r + '*'); var i = RegExp(r + r + '*$'); var c = function (e) { return function (t) { var n = String(s(t)); return 1 & e && (n = n.replace(a, '')), 2 & e && (n = n.replace(i, '')), n } }; e.exports = { start: c(1), end: c(2), trim: c(3) } }, '6fd8': function (e, t, n) { 'use strict'; n.d(t, 'c', function () { return o }), n.d(t, 'a', function () { return r }), n.d(t, 'd', function () { return a }), n.d(t, 'e', function () { return i }), n.d(t, 'b', function () { return c }); var s = n('b32d'); var o = function (e) { return Object(s.a)({ method: 'POST', url: '/boss/course/getQueryCourses', data: e }) }; var r = function (e) { return Object(s.a)({ method: 'GET', url: '/boss/course/changeState', params: e }) }; var a = function (e) { return Object(s.a)({ method: 'POST', url: '/boss/course/saveOrUpdateCourse', data: e }) }; var i = function (e, t) { return Object(s.a)({ method: 'POST', url: '/boss/course/upload', data: e, onUploadProgress: t }) }; var c = function (e) { return Object(s.a)({ method: 'GET', url: '/boss/course/getCourseById', params: { courseId: e } }) } }, 7156: function (e, t, n) { var s = n('861d'); var o = n('d2bb'); e.exports = function (e, t, n) { var r, a; return o && typeof (r = t.constructor) === 'function' && r !== n && s(a = r.prototype) && a !== n.prototype && o(e, a), e } }, '7ddd': function (e, t, n) { 'use strict'; n('cb53') }, a9e3: function (e, t, n) { 'use strict'; var s = n('83ab'); var o = n('da84'); var r = n('94ca'); var a = n('6eeb'); var i = n('5135'); var c = n('c6b6'); var u = n('7156'); var l = n('c04e'); var d = n('d039'); var f = n('7c73'); var p = n('241c').f; var m = n('06cf').f; var h = n('9bf2').f; var b = n('58a8').trim; var v = 'Number'; var S = o[v]; var w = S.prototype; var g = c(f(w)) == v; var N = function (e) { var t; var n; var s; var o; var r; var a; var i; var c; var u = l(e, !1); if (typeof u === 'string' && u.length > 2) if (u = b(u), t = u.charCodeAt(0), t === 43 || t === 45) { if (n = u.charCodeAt(2), n === 88 || n === 120) return NaN } else if (t === 48) { switch (u.charCodeAt(1)) { case 66:case 98:s = 2, o = 49; break; case 79:case 111:s = 8, o = 55; break; default:return +u } for (r = u.slice(2), a = r.length, i = 0; i < a; i++) if (c = r.charCodeAt(i), c < 48 || c > o) return NaN; return parseInt(r, s) } return +u }; if (r(v, !S(' 0o1') || !S('0b1') || S('+0x1'))) { for (var I, O = function (e) { var t = arguments.length < 1 ? 0 : e; var n = this; return n instanceof O && (g ? d(function () { w.valueOf.call(n) }) : c(n) != v) ? u(new S(N(t)), n, O) : N(t) }, x = s ? p(S) : 'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range'.split(','), A = 0; x.length > A; A++)i(S, I = x[A]) && !i(O, I) && h(O, I, m(S, I)); O.prototype = w, w.constructor = O, a(o, v, O) } }, cb53: function (e, t, n) {}, d81d: function (e, t, n) { 'use strict'; var s = n('23e7'); var o = n('b727').map; var r = n('1dde'); var a = r('map'); s({ target: 'Array', proto: !0, forced: !a }, { map: function (e) { return o(this, e, arguments.length > 1 ? arguments[1] : void 0) } }) } }])
// # sourceMappingURL=course-section.36e1feb3.js.map
