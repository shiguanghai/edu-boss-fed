(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["alloc-menu"],{2257:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"f",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"g",(function(){return d}));var n=r("b32d"),o=function(e){return Object(n["a"])({method:"POST",url:"/boss/menu/saveOrUpdate",data:e})},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return Object(n["a"])({method:"GET",url:"/boss/menu/getEditMenuInfo",params:{id:e}})},c=function(){return Object(n["a"])({method:"GET",url:"/boss/menu/getAll"})},u=function(e){return Object(n["a"])({method:"DELETE",url:"/boss/menu/".concat(e)})},i=function(){return Object(n["a"])({method:"GET",url:"/boss/menu/getMenuNodeList"})},s=function(e){return Object(n["a"])({method:"POST",url:"/boss/menu/allocateRoleMenus",data:e})},d=function(e){return Object(n["a"])({method:"GET",url:"/boss/menu/getRoleMenus",params:{roleId:e}})}},2909:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){if(Array.isArray(e))return n(e)}r.d(t,"a",(function(){return i}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r("fb6a"),r("b0c0");function c(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){return o(e)||a(e)||c(e)||u()}},"4df4":function(e,t,r){"use strict";var n=r("0366"),o=r("7b0b"),a=r("9bdd"),c=r("e95a"),u=r("50c4"),i=r("8418"),s=r("35a1");e.exports=function(e){var t,r,d,f,l,h,b=o(e),p="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,g=void 0!==m,y=s(b),k=0;if(g&&(m=n(m,v>2?arguments[2]:void 0,2)),void 0==y||p==Array&&c(y))for(t=u(b.length),r=new p(t);t>k;k++)h=g?m(b[k],k):b[k],i(r,k,h);else for(f=y.call(b),l=f.next,r=new p;!(d=l.call(f)).done;k++)h=g?a(f,m,[d.value,k],!0):d.value,i(r,k,h);return r.length=k,r}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),o=r("5899"),a="["+o+"]",c=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),i=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(c,"")),2&e&&(r=r.replace(u,"")),r}};e.exports={start:i(1),end:i(2),trim:i(3)}},"675f":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return u}));var n=r("b32d"),o=function(e){return Object(n["a"])({method:"POST",url:"/boss/resource/getResourcePages",data:e})},a=function(){return Object(n["a"])({method:"GET",url:"/boss/resource/getAll"})},c=function(e){return Object(n["a"])({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})},u=function(e){return Object(n["a"])({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:e}})}},7156:function(e,t,r){var n=r("861d"),o=r("d2bb");e.exports=function(e,t,r){var a,c;return o&&"function"==typeof(a=t.constructor)&&a!==r&&n(c=a.prototype)&&c!==r.prototype&&o(e,c),e}},"7ca9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alloc-menu"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("分配权限")])]),r("el-tree",{ref:"menu-tree",attrs:{"node-key":"id",data:e.menus,props:e.defaultProps,"default-checked-keys":e.checkedKeys,"show-checkbox":"","default-expand-all":""}}),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:e.resetChecked}},[e._v("清空")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1)},o=[],a=r("2909"),c=r("1da1"),u=(r("96cf"),r("a9e3"),r("159b"),r("99af"),r("2b0e")),i=r("2257"),s=u["default"].extend({name:"AllocMenu",props:{roleId:{type:[String,Number],required:!0}},data:function(){return{menus:[],defaultProps:{children:"subMenuList",label:"name"},checkedKeys:[]}},created:function(){this.loadMenus(),this.loadRoleMenus()},methods:{loadRoleMenus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["g"])(e.roleId);case 2:r=t.sent,n=r.data,e.getCheckedKeys(n.data);case 5:case"end":return t.stop()}}),t)})))()},getCheckedKeys:function(e){var t=this;e.forEach((function(e){e.selected&&!e.subMenuList&&(t.checkedKeys=[].concat(Object(a["a"])(t.checkedKeys),[e.id])),e.subMenuList&&t.getCheckedKeys(e.subMenuList)}))},loadMenus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["f"])();case 2:r=t.sent,n=r.data,e.menus=n.data;case 5:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$refs["menu-tree"].getCheckedKeys(),t.next=3,Object(i["a"])({roleId:e.roleId,menuIdList:r});case 3:e.$message.success("操作成功"),e.$router.back();case 5:case"end":return t.stop()}}),t)})))()},resetChecked:function(){this.$refs["menu-tree"].setCheckedKeys([])}}}),d=s,f=r("2877"),l=Object(f["a"])(d,n,o,!1,null,"88a28454",null);t["default"]=l.exports},"7db0":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").find,a=r("44d2"),c="find",u=!0;c in[]&&Array(1)[c]((function(){u=!1})),n({target:"Array",proto:!0,forced:u},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(c)},9614:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alloc-resource"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("分配资源")])]),r("el-tree",{ref:"tree",attrs:{data:e.resources,"node-key":"id",props:e.defaultProps,"show-checkbox":"","default-checked-keys":e.defaultCheckedKeys,"default-expanded-keys":e.defaultCheckedKeys}}),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:e.resetChecked}},[e._v("清空")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1)},o=[],a=r("2909"),c=r("1da1"),u=(r("96cf"),r("a9e3"),r("d3b7"),r("3ca3"),r("ddb0"),r("159b"),r("7db0"),r("99af"),r("2b0e")),i=r("675f"),s=r("9d1c"),d=u["default"].extend({name:"AllocResource",props:{roleId:{type:[String,Number],required:!0}},data:function(){return{resources:[],defaultProps:{children:"children",label:"name"},defaultCheckedKeys:[]}},created:function(){this.loadResources(),this.loadRoleResources()},methods:{loadResources:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(i["b"])(),Object(s["a"])()]);case 2:r=t.sent,n=r[0].data.data,o=r[1].data.data,n.forEach((function(e){var t=o.find((function(t){return t.id===e.categoryId}));t&&(t.children=t.children||[],t.children.push(e))})),o.forEach((function(e){e.id=Math.random()})),e.resources=o;case 8:case"end":return t.stop()}}),t)})))()},loadRoleResources:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["d"])(e.roleId);case 2:r=t.sent,n=r.data,e.getCheckedResources(n.data);case 5:case"end":return t.stop()}}),t)})))()},getCheckedResources:function(e){var t=this;e.forEach((function(e){e.resourceList&&e.resourceList.forEach((function(e){e.selected&&(t.defaultCheckedKeys=[].concat(Object(a["a"])(t.defaultCheckedKeys),[e.id]))}))}))},onSave:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$refs.tree.getCheckedNodes(),n=[],r.forEach((function(e){e.children||n.push(e.id)})),t.next=5,Object(i["a"])({roleId:e.roleId,resourceIdList:n});case 5:e.$message.success("保存成功"),e.$router.back();case 7:case"end":return t.stop()}}),t)})))()},resetChecked:function(){this.$refs.tree.setCheckedKeys([])}}}),f=d,l=r("2877"),h=Object(l["a"])(f,n,o,!1,null,"2ba70c75",null);t["default"]=h.exports},"99af":function(e,t,r){"use strict";var n=r("23e7"),o=r("d039"),a=r("e8b5"),c=r("861d"),u=r("7b0b"),i=r("50c4"),s=r("8418"),d=r("65f0"),f=r("1dde"),l=r("b622"),h=r("2d00"),b=l("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",m=h>=51||!o((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),g=f("concat"),y=function(e){if(!c(e))return!1;var t=e[b];return void 0!==t?!!t:a(e)},k=!m||!g;n({target:"Array",proto:!0,forced:k},{concat:function(e){var t,r,n,o,a,c=u(this),f=d(c,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(a=-1===t?c:arguments[t],y(a)){if(o=i(a.length),l+o>p)throw TypeError(v);for(r=0;r<o;r++,l++)r in a&&s(f,l,a[r])}else{if(l>=p)throw TypeError(v);s(f,l++,a)}return f.length=l,f}})},"9bdd":function(e,t,r){var n=r("825a"),o=r("2a62");e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(c){throw o(e),c}}},"9d1c":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("b32d"),o=function(){return Object(n["a"])({method:"GET",url:"/boss/resource/category/getAll"})}},a630:function(e,t,r){var n=r("23e7"),o=r("4df4"),a=r("1c7e"),c=!a((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:c},{from:o})},a9e3:function(e,t,r){"use strict";var n=r("83ab"),o=r("da84"),a=r("94ca"),c=r("6eeb"),u=r("5135"),i=r("c6b6"),s=r("7156"),d=r("c04e"),f=r("d039"),l=r("7c73"),h=r("241c").f,b=r("06cf").f,p=r("9bf2").f,v=r("58a8").trim,m="Number",g=o[m],y=g.prototype,k=i(l(y))==m,O=function(e){var t,r,n,o,a,c,u,i,s=d(e,!1);if("string"==typeof s&&s.length>2)if(s=v(s),t=s.charCodeAt(0),43===t||45===t){if(r=s.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+s}for(a=s.slice(2),c=a.length,u=0;u<c;u++)if(i=a.charCodeAt(u),i<48||i>o)return NaN;return parseInt(a,n)}return+s};if(a(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,E=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof E&&(k?f((function(){y.valueOf.call(r)})):i(r)!=m)?s(new g(O(t)),r,E):O(t)},I=n?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;I.length>x;x++)u(g,w=I[x])&&!u(E,w)&&p(E,w,b(g,w));E.prototype=y,y.constructor=E,c(o,m,E)}},b0c0:function(e,t,r){var n=r("83ab"),o=r("9bf2").f,a=Function.prototype,c=a.toString,u=/^\s*function ([^ (]*)/,i="name";n&&!(i in a)&&o(a,i,{configurable:!0,get:function(){try{return c.call(this).match(u)[1]}catch(e){return""}}})},d28b:function(e,t,r){var n=r("746f");n("iterator")},e01a:function(e,t,r){"use strict";var n=r("23e7"),o=r("83ab"),a=r("da84"),c=r("5135"),u=r("861d"),i=r("9bf2").f,s=r("e893"),d=a.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var f={},l=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof l?new d(e):void 0===e?d():d(e);return""===e&&(f[t]=!0),t};s(l,d);var h=l.prototype=d.prototype;h.constructor=l;var b=h.toString,p="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;i(h,"description",{configurable:!0,get:function(){var e=u(this)?this.valueOf():this,t=b.call(e);if(c(f,e))return"";var r=p?t.slice(7,-1):t.replace(v,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:l})}},fb6a:function(e,t,r){"use strict";var n=r("23e7"),o=r("861d"),a=r("e8b5"),c=r("23cb"),u=r("50c4"),i=r("fc6a"),s=r("8418"),d=r("b622"),f=r("1dde"),l=f("slice"),h=d("species"),b=[].slice,p=Math.max;n({target:"Array",proto:!0,forced:!l},{slice:function(e,t){var r,n,d,f=i(this),l=u(f.length),v=c(e,l),m=c(void 0===t?l:t,l);if(a(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?o(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return b.call(f,v,m);for(n=new(void 0===r?Array:r)(p(m-v,0)),d=0;v<m;v++,d++)v in f&&s(n,d,f[v]);return n.length=d,n}})}}]);
//# sourceMappingURL=alloc-menu.406f643e.js.map